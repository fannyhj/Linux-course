# H2 - Infraa koodina

## Tiivistelmä - (https://terokarvinen.com/2024/hello-salt-infra-as-code/)

- Asennetaan Salt, jos ei ole jo.
- Käytetään/ladataan 'micro editori'.
- Luodaan kansio "hello" moduulille. /srv/salt/hello kansio jaetaan kaikille orjakoneille.
- Siirrytään kansioon ja avataan micro editori.
- Kirjoitetaan koodia.
- Ajetaan koodi.

## Tiivistelmä - (https://docs.saltproject.io/salt/user-guide/en/latest/topics/overview.html#rules-of-yaml)

Rules of YAML:
- Data muodostuu "Key: value" pareista.
- Mapitukset käyttää kaksoispistettä ja välilyöntiä merkitäkseen paritukset.
- Kaikki nämä ovat tapauskohtaisia.
- Tabulaattoria ei saa käyttää, vain välilyöntejä.
- Kommentit alkavat # merkillä.

  
YAML simple structure:
- YAML muodostuu kolmesta perus elementtityypistä:
- 1. Skalaareissa arvo voi olla numero, merkkijono tai totuusarvo.
- 2. Listoissa "key":tä seuraa lista arvoja, jossa jokainen arvo on erillisellä rivillä ja joita seuraa kaksi välilyöntiä ja väliviiva.
- 3. Sanakirjat on kokoelma mapituksia ja listoja.
 
Lists and dictionaries - YAML block structures
- YAML on järjestetty lohkorakenteisiin.
- Sisennys asettaa kontekstin. Käyttäjän täytyy sisennettävä ominaisuudet ja lista yhdellä tai useammalla väliyönnillä, mutta kaksi välilyöntiä on vakio.
- Kokoelma, joka on luettelo tai sanakirja lohkosarja osoittaa jokaisen merkinnän yhdysmerkillä ja välilyönnillä.

## Tiivistelmä - (https://docs.saltproject.io/en/latest/ref/states/top.html)

Introduction:
- Suurin osa infrastrukuureisa koostuvat ryhmittyneistä koneista, jossa jokaisella koneella on saallainen rooli toisiin.
- Ryhmien hallinnan edellytyksenä administraattorin täytyy luoda roolit ryhmille.
- Saltissa tiedostoa, joka sisältää verkossa olevien koneryhmien välisen mapituksen sekä niihin sovellettavat konfiguraatio roolit, kutsutaan "top fileksi".
- Top filet ovat automaattisesti nimetty "top.sls":ksi, koska ne ovat aina tiedostojen hierarkkiassa päällimmäisenä.

A basic example:
- Top filet sisältävät kolmme komponenttia:
- 1. Ympäristö: Tilapuuhakemisto, joka sisältää joukon tilatiedostoja järjestelmien konfigurointia varten.
- 2. Kohde: Ryhmä koneita, joille asetetaan joukko tiloja.
- 3. Tilatiedostot: Luettelo tilatiedostoista, joita sovelletaan kohteeseen. Jokainen tilatiedosto kuvaa yhden tai useamman tilan, jotka konfiguroidaan ja laitetaan täytäntöön kohdekoneissa.
- Ympäristöt sisältävät kohteita ja kohteet sisältävät tiloja.

- <img width="805" height="463" alt="image" src="https://github.com/user-attachments/assets/668579aa-de97-4722-b855-e2aaf99bc5c8" />
<img width="748" height="83" alt="image" src="https://github.com/user-attachments/assets/f2555ef5-dc57-439e-9660-28edbe4484c4" />
<img width="453" height="76" alt="image" src="https://github.com/user-attachments/assets/d9d6f598-d446-4d5d-864c-a52261279ea1" />
<img width="1011" height="484" alt="image" src="https://github.com/user-attachments/assets/cdf94c93-f538-488c-a4da-938466be6687" />
<img width="760" height="122" alt="image" src="https://github.com/user-attachments/assets/8297c91f-6919-4e5e-8f5e-e561f55627c2" />
<img width="972" height="444" alt="image" src="https://github.com/user-attachments/assets/e05fed0a-5a8e-4971-8077-38f23256f491" />
<img width="842" height="64" alt="image" src="https://github.com/user-attachments/assets/77ba984c-70aa-4d0c-98c2-f3f55b39bab6" />
<img width="969" height="603" alt="image" src="https://github.com/user-attachments/assets/9b05a133-cbba-4a23-bbc9-5de9c5470bb0" />
<img width="1046" height="537" alt="image" src="https://github.com/user-attachments/assets/5c14df35-fca0-470e-b297-19e578a6f509" />
<img width="1050" height="487" alt="image" src="https://github.com/user-attachments/assets/ffb4d541-09ba-4f7d-96ef-2d63131c469a" />´









